# Chronos 使用教程

欢迎使用Chronos！本教程将带你了解Chronos的所有功能，让你快速掌握文件版本管理。

## 什么是Chronos？

Chronos是一款为非技术用户设计的本地文件版本管理工具。它可以帮你：
- 📸 保存文件的历史版本（快照）
- ⏮️ 随时恢复到之前的版本
- 🌿 创建分支进行实验，不影响主版本
- 🔄 合并实验性修改到主版本
- 🗂️ 告别混乱的文件命名（如"报告_最终版_v3_真正最终版.doc"）

## 核心概念

### 时光库（Repository）
一个被Chronos管理的文件夹，可以追踪其中所有文件的变化。

### 快照（Snapshot）
某个时间点的文件状态保存，类似于"存档点"。

### 分支（Branch）
独立的工作副本，可以在不影响主版本的情况下进行实验。

### 历史记录（History）
所有快照的时间线，可以查看和恢复到任何历史版本。

## 快速开始

### 第一步：启动Chronos

```bash
cd chronos
./start-dev.sh
```

在浏览器中打开: `http://localhost:5173`

### 第二步：初始化时光库

1. 在"仓库路径"输入框中输入你想管理的文件夹路径
   - 例如: `/Users/你的用户名/Documents/我的项目`
2. 点击"初始化时光库"按钮
3. 看到成功提示后，该文件夹就成为了一个时光库

💡 **提示**: 选择一个包含重要文件的文件夹，比如你的工作项目、论文或设计文件。

#### 自动忽略系统文件

初始化时光库时，Chronos会自动创建`.gitignore`文件来忽略系统文件，包括：
- **macOS系统文件**: `.DS_Store`、`.AppleDouble`等
- **Windows系统文件**: `Thumbs.db`、`desktop.ini`等
- **Linux系统文件**: `*~`、`.directory`等
- **IDE配置文件**: `.vscode/`、`.idea/`等

这些文件不会出现在文件变更列表中，也不会被保存到快照中。

💡 **自定义忽略规则**: 如果需要忽略其他文件，可以手动编辑时光库根目录下的`.gitignore`文件。

## 基础功能

### 1. 创建快照

快照是保存文件当前状态的方式。

**操作步骤**:
1. 修改时光库中的文件（添加、修改或删除）
2. 在Chronos界面点击"刷新状态"查看变更
3. 点击"创建快照"按钮
4. 在弹出的对话框中：
   - 查看变更的文件列表
   - 选择要包含的文件（默认全选）
   - 输入快照描述（必填）
   - 可选：添加详细说明
5. 点击"确认"

**文件状态说明**:
- 🟢 **新增**: 新创建的文件
- 🟡 **修改**: 内容被修改的文件
- 🔴 **删除**: 被删除的文件

**最佳实践**:
- ✅ 在完成一个小任务后创建快照
- ✅ 使用清晰的描述，说明做了什么改动
- ✅ 定期创建快照，不要等到做了很多改动才保存
- ❌ 避免描述过于简单（如"更新"、"修改"）

**示例描述**:
- ✅ 好的描述: "添加第三章内容，修正第二章的拼写错误"
- ✅ 好的描述: "完成用户登录功能的前端界面"
- ❌ 不好的描述: "更新"
- ❌ 不好的描述: "修改文件"

### 2. 查看历史记录

历史记录显示所有创建的快照。

**操作步骤**:
1. 在界面右侧的"历史记录"区域查看所有快照
2. 快照按时间倒序排列（最新的在最上面）
3. 点击任意快照可以展开查看详细信息

**历史记录显示内容**:
- 📝 快照描述
- 🕐 创建时间
- 👤 创建者
- 🏷️ "最新"标签（仅最新快照）

### 3. 恢复到历史版本

如果需要回到之前的版本，可以使用恢复功能。

**操作步骤**:
1. 在历史记录中找到想要恢复的快照
2. 点击"恢复到此版本"按钮
3. 阅读警告提示（未保存的变更将丢失）
4. 点击"确认"

⚠️ **重要提示**:
- 恢复操作会将文件恢复到该快照的状态
- 当前未保存的修改会丢失
- 建议在恢复前先创建一个快照保存当前状态

**使用场景**:
- 发现最近的修改有问题，想回到之前的版本
- 需要查看或使用旧版本的文件
- 误删除了重要内容，需要恢复

### 4. 刷新状态

查看当前文件的变更情况。

**操作步骤**:
1. 点击"刷新状态"按钮
2. 查看"文件状态"区域显示的变更

**何时使用**:
- 修改文件后，想查看有哪些变更
- 创建快照前，确认要提交的文件
- 恢复版本后，查看文件状态

## 高级功能

### 5. 分支管理

分支允许你在不影响主版本的情况下进行实验性修改。

#### 5.1 创建分支

**操作步骤**:
1. 在"分支管理"区域点击"创建新分支"
2. 输入分支名称（建议使用有意义的名称）
3. 点击"确认"

**分支命名建议**:
- ✅ `feature-new-chapter` - 添加新功能
- ✅ `experiment-layout` - 实验性修改
- ✅ `draft-version2` - 草稿版本
- ❌ `test` - 名称过于简单
- ❌ `branch1` - 没有说明用途

**使用场景**:
- 想尝试新的写作思路，但不确定是否采用
- 需要做大幅度修改，但想保留原版本
- 多人协作时，每人在自己的分支工作

#### 5.2 切换分支

**操作步骤**:
1. 在分支下拉列表中选择目标分支
2. 系统自动切换到该分支
3. 文件内容会变为该分支的状态

**注意事项**:
- 切换分支前建议先创建快照保存当前工作
- 切换后，文件内容会改变，这是正常的
- 每个分支有独立的历史记录

#### 5.3 合并分支

当实验性修改满意后，可以合并到主分支。

**操作步骤**:
1. 切换到目标分支（通常是main）
2. 点击"合并分支"按钮
3. 选择要合并的源分支
4. 查看合并预览
5. 点击"确认合并"

**合并结果**:
- ✅ 无冲突: 自动合并成功
- ⚠️ 有冲突: 显示冲突文件列表，需要手动解决

**冲突处理**:
如果出现冲突（两个分支修改了同一文件的同一位置）：
1. 查看冲突文件列表
2. 手动编辑文件，保留需要的内容
3. 创建新快照完成合并

### 6. 分支工作流示例

**场景**: 你正在写一篇论文，想尝试不同的结构

```
1. 在main分支创建快照 "完成初稿"
   ↓
2. 创建新分支 "experiment-structure"
   ↓
3. 在新分支中重新组织章节结构
   ↓
4. 创建快照 "尝试新的章节结构"
   ↓
5. 如果满意：
   - 切换回main分支
   - 合并experiment-structure分支
   
   如果不满意：
   - 切换回main分支
   - 删除experiment-structure分支（保留原版本）
```

## 实用技巧

### 技巧1: 定期创建快照

建议每完成一个小任务就创建快照：
- 写完一个段落
- 完成一个功能
- 修复一个问题
- 完成一天的工作

### 技巧2: 使用描述性的快照说明

好的快照描述应该：
- 简洁明了
- 说明做了什么
- 便于以后查找

### 技巧3: 实验前创建分支

在做大改动前：
1. 创建快照保存当前状态
2. 创建新分支进行实验
3. 满意后合并，不满意就放弃

### 技巧4: 定期查看历史

定期浏览历史记录可以：
- 回顾工作进展
- 找到特定版本
- 了解项目演变过程

### 技巧5: 备份重要时光库

虽然Chronos保存了历史版本，但建议：
- 定期备份整个时光库文件夹
- 使用云存储同步（如iCloud、Dropbox）
- 重要项目考虑使用远程Git仓库

## 常见使用场景

### 场景1: 论文写作

```
1. 初始化论文文件夹为时光库
2. 完成大纲后创建快照 "完成论文大纲"
3. 每写完一章创建快照 "完成第X章"
4. 想尝试不同的论证方式：
   - 创建分支 "alternative-argument"
   - 修改后创建快照
   - 对比两个版本，选择更好的
5. 导师反馈后修改，创建快照 "根据导师意见修改"
```

### 场景2: 设计项目

```
1. 初始化设计文件夹
2. 完成初稿后创建快照 "设计初稿"
3. 客户要求尝试不同配色：
   - 创建分支 "color-scheme-blue"
   - 创建分支 "color-scheme-green"
   - 在各分支中尝试不同配色
   - 客户选定后合并对应分支
4. 最终版本创建快照 "最终交付版本"
```

### 场景3: 代码开发

```
1. 初始化项目文件夹
2. 完成基础功能后创建快照 "基础功能完成"
3. 添加新功能：
   - 创建分支 "feature-login"
   - 开发登录功能
   - 测试通过后合并到main
4. 修复Bug：
   - 创建分支 "fix-login-error"
   - 修复问题
   - 测试通过后合并
```

## 界面说明

### 主界面布局

```
┌─────────────────────────────────────────────────────┐
│  Chronos - 文件时光机                                │
├─────────────────────────────────────────────────────┤
│  [仓库路径输入框]  [初始化时光库] [刷新状态]         │
├──────────────────────┬──────────────────────────────┤
│  文件状态             │  历史记录                     │
│  ┌─────────────────┐ │  ┌────────────────────────┐ │
│  │ 📄 file1.txt    │ │  │ 📝 添加新功能          │ │
│  │    🟡 修改      │ │  │    🕐 2小时前          │ │
│  │                 │ │  │    [恢复到此版本]      │ │
│  │ 📄 file2.txt    │ │  ├────────────────────────┤ │
│  │    🟢 新增      │ │  │ 📝 完成初稿            │ │
│  └─────────────────┘ │  │    🕐 1天前            │ │
│  [创建快照]          │  └────────────────────────┘ │
├──────────────────────┴──────────────────────────────┤
│  分支管理                                            │
│  [main ▼]  [创建新分支]  [合并分支]                 │
└─────────────────────────────────────────────────────┘
```

### 按钮说明

- **初始化时光库**: 将文件夹转换为时光库
- **刷新状态**: 检查文件变更
- **创建快照**: 保存当前文件状态
- **恢复到此版本**: 回到历史版本
- **创建新分支**: 创建实验性分支
- **合并分支**: 合并分支内容

## 键盘快捷键

目前Chronos主要通过鼠标操作，未来版本将添加键盘快捷键支持。

## 下一步

- 查看[常见问题解答](./FAQ.md)了解更多
- 查看[安装指南](./INSTALLATION_GUIDE.md)解决安装问题
- 开始使用Chronos管理你的文件！

## 获取帮助

如果在使用过程中遇到问题：
1. 查看本教程的相关章节
2. 查看[常见问题解答](./FAQ.md)
3. 在GitHub上提交Issue

祝你使用愉快！🎉
