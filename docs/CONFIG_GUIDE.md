# Chronos v2.0 - é…ç½®æ–‡ä»¶è¯´æ˜

**åˆ›å»ºæ—¥æœŸ**: 2025-11-02

---

## ğŸ“¦ package.json - é¡¹ç›®é…ç½®ä¸­å¿ƒ

### ä½œç”¨
`package.json` æ˜¯ Node.js é¡¹ç›®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œå®šä¹‰äº†é¡¹ç›®çš„æ‰€æœ‰ä¿¡æ¯ã€‚

### ä¸»è¦åŠŸèƒ½

#### 1. é¡¹ç›®åŸºæœ¬ä¿¡æ¯
```json
{
  "name": "chronos-v2",           // é¡¹ç›®åç§°
  "version": "2.0.0",             // ç‰ˆæœ¬å·
  "description": "...",           // é¡¹ç›®æè¿°
  "author": "Chronos Team",       // ä½œè€…
  "license": "MIT"                // å¼€æºåè®®
}
```

#### 2. ä¾èµ–ç®¡ç†
```json
{
  "dependencies": {
    "react": "^18.2.0",           // ç”Ÿäº§ç¯å¢ƒä¾èµ–
    "express": "^4.18.2"
  },
  "devDependencies": {
    "typescript": "^5.3.3",       // å¼€å‘ç¯å¢ƒä¾èµ–
    "vite": "^5.0.8"
  }
}
```

**ä½œç”¨**ï¼š
- è®°å½•é¡¹ç›®éœ€è¦å“ªäº›ç¬¬ä¸‰æ–¹åº“
- è¿è¡Œ `npm install` æ—¶è‡ªåŠ¨å®‰è£…è¿™äº›åº“
- ç¡®ä¿å›¢é˜Ÿæˆå‘˜ä½¿ç”¨ç›¸åŒç‰ˆæœ¬çš„ä¾èµ–

#### 3. è„šæœ¬å‘½ä»¤
```json
{
  "scripts": {
    "dev": "vite",                // npm run dev å¯åŠ¨å¼€å‘æœåŠ¡å™¨
    "build": "tsc && vite build", // npm run build æ„å»ºé¡¹ç›®
    "test": "vitest run"          // npm run test è¿è¡Œæµ‹è¯•
  }
}
```

**ä½œç”¨**ï¼š
- å®šä¹‰å¿«æ·å‘½ä»¤
- ç»Ÿä¸€å›¢é˜Ÿçš„å¼€å‘æµç¨‹
- ç®€åŒ–å¤æ‚çš„å‘½ä»¤è¡Œæ“ä½œ

#### 4. ç¯å¢ƒè¦æ±‚
```json
{
  "engines": {
    "node": ">=18.0.0",           // è¦æ±‚ Node.js 18 æˆ–æ›´é«˜
    "npm": ">=9.0.0"              // è¦æ±‚ npm 9 æˆ–æ›´é«˜
  }
}
```

### ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ
- âœ… ç®¡ç†é¡¹ç›®ä¾èµ–ï¼ˆä¸ç”¨æ‰‹åŠ¨ä¸‹è½½åº“ï¼‰
- âœ… å®šä¹‰å¼€å‘å‘½ä»¤ï¼ˆç»Ÿä¸€å›¢é˜Ÿå·¥ä½œæµï¼‰
- âœ… è®°å½•é¡¹ç›®ä¿¡æ¯ï¼ˆæ–¹ä¾¿å‘å¸ƒå’Œåˆ†äº«ï¼‰
- âœ… ç‰ˆæœ¬æ§åˆ¶ï¼ˆç¡®ä¿ç¯å¢ƒä¸€è‡´ï¼‰

---

## âš™ï¸ config/ ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶

### 1. tsconfig.json - TypeScript é…ç½®

**ä½œç”¨**ï¼šå‘Šè¯‰ TypeScript ç¼–è¯‘å™¨å¦‚ä½•ç¼–è¯‘ä»£ç 

```json
{
  "compilerOptions": {
    "target": "ES2020",           // ç¼–è¯‘åˆ° ES2020 æ ‡å‡†
    "module": "ESNext",           // ä½¿ç”¨æœ€æ–°çš„æ¨¡å—ç³»ç»Ÿ
    "strict": true,               // å¯ç”¨ä¸¥æ ¼ç±»å‹æ£€æŸ¥
    "jsx": "react-jsx",           // æ”¯æŒ React JSX
    "outDir": "./dist"            // ç¼–è¯‘è¾“å‡ºç›®å½•
  }
}
```

**ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ**
- âœ… TypeScript éœ€è¦çŸ¥é“å¦‚ä½•ç¼–è¯‘ `.ts` æ–‡ä»¶
- âœ… é…ç½®ç±»å‹æ£€æŸ¥è§„åˆ™ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰
- âœ… æŒ‡å®šç¼–è¯‘ç›®æ ‡ï¼ˆæµè§ˆå™¨ç‰ˆæœ¬ï¼‰
- âœ… é…ç½®æ¨¡å—è§£æè§„åˆ™

**å®é™…æ•ˆæœ**ï¼š
```typescript
// æ²¡æœ‰ tsconfig.jsonï¼šTypeScript ä¸çŸ¥é“å¦‚ä½•å¤„ç†è¿™ä¸ªæ–‡ä»¶
// æœ‰ tsconfig.jsonï¼šTypeScript çŸ¥é“è¿™æ˜¯ React ä»£ç ï¼Œæ­£ç¡®ç¼–è¯‘
const App = () => <div>Hello</div>
```

---

### 2. tsconfig.server.json - æœåŠ¡ç«¯ TypeScript é…ç½®

**ä½œç”¨**ï¼šä¸“é—¨ä¸º Node.js åç«¯é…ç½® TypeScript

```json
{
  "extends": "./tsconfig.json",  // ç»§æ‰¿åŸºç¡€é…ç½®
  "compilerOptions": {
    "module": "CommonJS",         // Node.js ä½¿ç”¨ CommonJS
    "outDir": "./dist/server"     // è¾“å‡ºåˆ° dist/server
  },
  "include": ["src/server/**/*"]  // åªç¼–è¯‘ server ç›®å½•
}
```

**ä¸ºä»€ä¹ˆéœ€è¦å•ç‹¬é…ç½®ï¼Ÿ**
- âœ… å‰ç«¯å’Œåç«¯çš„æ¨¡å—ç³»ç»Ÿä¸åŒ
- âœ… å‰ç«¯ç”¨ ESMï¼ˆimport/exportï¼‰ï¼Œåç«¯ç”¨ CommonJSï¼ˆrequireï¼‰
- âœ… åˆ†å¼€ç¼–è¯‘ï¼Œé¿å…å†²çª

---

### 3. vite.config.ts - Vite æ„å»ºå·¥å…·é…ç½®

**ä½œç”¨**ï¼šé…ç½®å‰ç«¯å¼€å‘æœåŠ¡å™¨å’Œæ„å»ºå·¥å…·

```typescript
export default defineConfig({
  plugins: [react()],             // ä½¿ç”¨ React æ’ä»¶
  server: {
    port: 5173,                   // å¼€å‘æœåŠ¡å™¨ç«¯å£
    proxy: {                      // ä»£ç† API è¯·æ±‚
      '/api': 'http://localhost:3000'
    }
  },
  build: {
    outDir: 'dist/client'         // æ„å»ºè¾“å‡ºç›®å½•
  }
})
```

**ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ**
- âœ… å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆçƒ­æ›´æ–°ï¼‰
- âœ… å¤„ç† Reactã€TypeScriptã€CSS
- âœ… ä»£ç† API è¯·æ±‚ï¼ˆé¿å…è·¨åŸŸï¼‰
- âœ… ä¼˜åŒ–ç”Ÿäº§æ„å»ºï¼ˆå‹ç¼©ã€åˆ†åŒ…ï¼‰

**å®é™…æ•ˆæœ**ï¼š
- è¿è¡Œ `npm run dev` â†’ Vite è¯»å–è¿™ä¸ªé…ç½® â†’ å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- ä¿®æ”¹ä»£ç  â†’ Vite è‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨
- è¿è¡Œ `npm run build` â†’ Vite æ‰“åŒ…ä¼˜åŒ–ä»£ç 

---

### 4. vitest.config.ts - æµ‹è¯•å·¥å…·é…ç½®

**ä½œç”¨**ï¼šé…ç½®æµ‹è¯•æ¡†æ¶

```typescript
export default defineConfig({
  test: {
    globals: true,                // å…¨å±€æµ‹è¯•å‡½æ•°
    environment: 'jsdom',         // æ¨¡æ‹Ÿæµè§ˆå™¨ç¯å¢ƒ
    coverage: {
      reporter: ['text', 'html'], // è¦†ç›–ç‡æŠ¥å‘Šæ ¼å¼
      threshold: {
        lines: 80                 // è¦æ±‚ 80% ä»£ç è¦†ç›–ç‡
      }
    }
  }
})
```

**ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ**
- âœ… é…ç½®æµ‹è¯•ç¯å¢ƒï¼ˆæµè§ˆå™¨ or Node.jsï¼‰
- âœ… è®¾ç½®è¦†ç›–ç‡è¦æ±‚
- âœ… é…ç½®æµ‹è¯•æŠ¥å‘Šæ ¼å¼

**å®é™…æ•ˆæœ**ï¼š
- è¿è¡Œ `npm run test` â†’ Vitest è¯»å–é…ç½® â†’ è¿è¡Œæµ‹è¯•
- ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š â†’ æ£€æŸ¥æ˜¯å¦è¾¾åˆ° 80%

---

### 5. .eslintrc.json - ä»£ç æ£€æŸ¥è§„åˆ™

**ä½œç”¨**ï¼šæ£€æŸ¥ä»£ç è´¨é‡å’Œé£æ ¼

```json
{
  "extends": [
    "eslint:recommended",         // ä½¿ç”¨æ¨èè§„åˆ™
    "plugin:@typescript-eslint/recommended",
    "plugin:react/recommended"
  ],
  "rules": {
    "no-console": "warn",         // è­¦å‘Šä½¿ç”¨ console.log
    "no-unused-vars": "error"     // ç¦æ­¢æœªä½¿ç”¨çš„å˜é‡
  }
}
```

**ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ**
- âœ… ç»Ÿä¸€ä»£ç é£æ ¼
- âœ… å‘ç°æ½œåœ¨é”™è¯¯
- âœ… å¼ºåˆ¶æœ€ä½³å®è·µ

**å®é™…æ•ˆæœ**ï¼š
```typescript
// è¿™æ®µä»£ç ä¼šæŠ¥é”™
const unused = 123;  // âŒ ESLint: æœªä½¿ç”¨çš„å˜é‡
console.log('test'); // âš ï¸ ESLint: ä¸è¦ä½¿ç”¨ console.log

// ä¿®æ”¹å
const used = 123;
logger.info('test'); // âœ… ä½¿ç”¨ logger ä»£æ›¿ console
```

---

### 6. .prettierrc - ä»£ç æ ¼å¼åŒ–è§„åˆ™

**ä½œç”¨**ï¼šè‡ªåŠ¨æ ¼å¼åŒ–ä»£ç 

```json
{
  "semi": true,                   // ä½¿ç”¨åˆ†å·
  "singleQuote": true,            // ä½¿ç”¨å•å¼•å·
  "tabWidth": 2,                  // ç¼©è¿› 2 ç©ºæ ¼
  "trailingComma": "es5"          // å°¾éšé€—å·
}
```

**ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ**
- âœ… è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç 
- âœ… ç»Ÿä¸€å›¢é˜Ÿä»£ç é£æ ¼
- âœ… é¿å…æ ¼å¼äº‰è®º

**å®é™…æ•ˆæœ**ï¼š
```typescript
// æ ¼å¼åŒ–å‰ï¼ˆæ··ä¹±ï¼‰
const obj={name:"test",age:20}

// æ ¼å¼åŒ–åï¼ˆæ•´æ´ï¼‰
const obj = {
  name: 'test',
  age: 20,
};
```

---

### 7. electron-builder.yml - Electron æ‰“åŒ…é…ç½®

**ä½œç”¨**ï¼šé…ç½®æ¡Œé¢åº”ç”¨æ‰“åŒ…

```yaml
appId: com.chronos.app
productName: Chronos
directories:
  output: dist
mac:
  target: dmg                     # macOS æ‰“åŒ…æˆ .dmg
win:
  target: nsis                    # Windows æ‰“åŒ…æˆ .exe
```

**ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ**
- âœ… é…ç½®åº”ç”¨ä¿¡æ¯ï¼ˆåç§°ã€å›¾æ ‡ï¼‰
- âœ… æŒ‡å®šæ‰“åŒ…æ ¼å¼ï¼ˆdmgã€exeï¼‰
- âœ… é…ç½®è‡ªåŠ¨æ›´æ–°

**å®é™…æ•ˆæœ**ï¼š
- è¿è¡Œ `npm run build:electron`
- electron-builder è¯»å–é…ç½®
- ç”Ÿæˆ `Chronos-1.0.0.dmg`ï¼ˆmacOSï¼‰
- ç”Ÿæˆ `Chronos-Setup-1.0.0.exe`ï¼ˆWindowsï¼‰

---

## ğŸ”„ é…ç½®æ–‡ä»¶ä¹‹é—´çš„å…³ç³»

```
package.json (é¡¹ç›®ä¸­å¿ƒ)
    â†“
    â”œâ”€â†’ tsconfig.json (TypeScript ç¼–è¯‘)
    â”‚       â†“
    â”‚       â””â”€â†’ tsconfig.server.json (åç«¯ç¼–è¯‘)
    â”‚
    â”œâ”€â†’ vite.config.ts (å‰ç«¯å¼€å‘å’Œæ„å»º)
    â”‚       â†“
    â”‚       â””â”€â†’ ä½¿ç”¨ tsconfig.json
    â”‚
    â”œâ”€â†’ vitest.config.ts (æµ‹è¯•)
    â”‚       â†“
    â”‚       â””â”€â†’ ä½¿ç”¨ tsconfig.json
    â”‚
    â”œâ”€â†’ .eslintrc.json (ä»£ç æ£€æŸ¥)
    â”‚       â†“
    â”‚       â””â”€â†’ æ£€æŸ¥ TypeScript ä»£ç 
    â”‚
    â”œâ”€â†’ .prettierrc (ä»£ç æ ¼å¼åŒ–)
    â”‚
    â””â”€â†’ electron-builder.yml (æ¡Œé¢åº”ç”¨æ‰“åŒ…)
```

---

## ğŸ¯ å®é™…å·¥ä½œæµç¨‹

### å¼€å‘æµç¨‹
```bash
# 1. å®‰è£…ä¾èµ–
npm install
# â†’ è¯»å– package.json çš„ dependencies
# â†’ ä¸‹è½½æ‰€æœ‰éœ€è¦çš„åº“åˆ° node_modules/

# 2. å¯åŠ¨å¼€å‘
npm run dev
# â†’ è¯»å– package.json çš„ scripts.dev
# â†’ æ‰§è¡Œ vite --config config/vite.config.ts
# â†’ Vite è¯»å– vite.config.ts
# â†’ å¯åŠ¨å¼€å‘æœåŠ¡å™¨åœ¨ http://localhost:5173

# 3. ç¼–å†™ä»£ç 
# â†’ TypeScript è¯»å– tsconfig.json
# â†’ æä¾›ç±»å‹æ£€æŸ¥å’Œè‡ªåŠ¨è¡¥å…¨
# â†’ ESLint è¯»å– .eslintrc.json
# â†’ å®æ—¶æ£€æŸ¥ä»£ç é—®é¢˜
# â†’ Prettier è¯»å– .prettierrc
# â†’ ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–

# 4. è¿è¡Œæµ‹è¯•
npm run test
# â†’ è¯»å– package.json çš„ scripts.test
# â†’ æ‰§è¡Œ vitest --config config/vitest.config.ts
# â†’ Vitest è¯»å– vitest.config.ts
# â†’ è¿è¡Œæ‰€æœ‰æµ‹è¯•

# 5. æ„å»ºé¡¹ç›®
npm run build
# â†’ å‰ç«¯ï¼šVite æ‰“åŒ…ï¼ˆä½¿ç”¨ vite.config.tsï¼‰
# â†’ åç«¯ï¼šTypeScript ç¼–è¯‘ï¼ˆä½¿ç”¨ tsconfig.server.jsonï¼‰
# â†’ ç”Ÿæˆ dist/ ç›®å½•

# 6. æ‰“åŒ…æ¡Œé¢åº”ç”¨
npm run build:electron
# â†’ electron-builder è¯»å– electron-builder.yml
# â†’ æ‰“åŒ…æˆ .dmg å’Œ .exe
```

---

## ğŸ’¡ ä¸ºä»€ä¹ˆè¦è¿™æ ·ç»„ç»‡ï¼Ÿ

### é—®é¢˜ï¼šå¦‚æœæ²¡æœ‰è¿™äº›é…ç½®æ–‡ä»¶ä¼šæ€æ ·ï¼Ÿ

âŒ **æ²¡æœ‰ package.json**
- ä¸çŸ¥é“éœ€è¦å®‰è£…å“ªäº›ä¾èµ–
- æ¯ä¸ªäººæ‰‹åŠ¨ä¸‹è½½åº“ï¼Œç‰ˆæœ¬ä¸ä¸€è‡´
- æ²¡æœ‰ç»Ÿä¸€çš„å‘½ä»¤ï¼Œæ¯ä¸ªäººç”¨ä¸åŒçš„æ–¹å¼å¯åŠ¨é¡¹ç›®

âŒ **æ²¡æœ‰ tsconfig.json**
- TypeScript ä¸çŸ¥é“å¦‚ä½•ç¼–è¯‘
- æ²¡æœ‰ç±»å‹æ£€æŸ¥
- ä»£ç è´¨é‡æ— æ³•ä¿è¯

âŒ **æ²¡æœ‰ vite.config.ts**
- æ— æ³•å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- æ— æ³•çƒ­æ›´æ–°
- æ— æ³•ä¼˜åŒ–æ„å»º

âŒ **æ²¡æœ‰ .eslintrc.json**
- ä»£ç é£æ ¼æ··ä¹±
- å®¹æ˜“å‡ºç°ä½çº§é”™è¯¯
- å›¢é˜Ÿåä½œå›°éš¾

### è§£å†³æ–¹æ¡ˆï¼šç»Ÿä¸€é…ç½®

âœ… **æœ‰äº†è¿™äº›é…ç½®æ–‡ä»¶**
- ä¸€ä¸ªå‘½ä»¤å®‰è£…æ‰€æœ‰ä¾èµ–ï¼š`npm install`
- ä¸€ä¸ªå‘½ä»¤å¯åŠ¨å¼€å‘ï¼š`npm run dev`
- ä¸€ä¸ªå‘½ä»¤è¿è¡Œæµ‹è¯•ï¼š`npm run test`
- ä¸€ä¸ªå‘½ä»¤æ„å»ºé¡¹ç›®ï¼š`npm run build`
- ä»£ç é£æ ¼è‡ªåŠ¨ç»Ÿä¸€
- ç±»å‹æ£€æŸ¥è‡ªåŠ¨è¿›è¡Œ
- å›¢é˜Ÿåä½œé¡ºç•…

---

## ğŸ“š æ€»ç»“

### package.json
- **è§’è‰²**ï¼šé¡¹ç›®çš„"èº«ä»½è¯"å’Œ"æŒ‡æŒ¥ä¸­å¿ƒ"
- **ä½œç”¨**ï¼šç®¡ç†ä¾èµ–ã€å®šä¹‰å‘½ä»¤ã€è®°å½•ä¿¡æ¯
- **å¿…è¦æ€§**ï¼šâ­â­â­â­â­ï¼ˆç»å¯¹å¿…éœ€ï¼‰

### config/ ç›®å½•
- **è§’è‰²**ï¼šå„ç§å·¥å…·çš„"ä½¿ç”¨è¯´æ˜ä¹¦"
- **ä½œç”¨**ï¼šå‘Šè¯‰å·¥å…·å¦‚ä½•å·¥ä½œ
- **å¿…è¦æ€§**ï¼šâ­â­â­â­â­ï¼ˆç»å¯¹å¿…éœ€ï¼‰

### ä¸ºä»€ä¹ˆæ”¾åœ¨ config/ ç›®å½•ï¼Ÿ
- âœ… æ ¹ç›®å½•æ•´æ´
- âœ… é…ç½®æ–‡ä»¶é›†ä¸­ç®¡ç†
- âœ… æ˜“äºæŸ¥æ‰¾å’Œç»´æŠ¤
- âœ… ç¬¦åˆæœ€ä½³å®è·µ

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [é¡¹ç›®æ€»æ–‡æ¡£](CLAUDE.md)
- [ä¾èµ–è¯´æ˜](DEPENDENCIES.md)
- [é¡¹ç›®çŠ¶æ€](PROJECT_STATUS.md)

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-11-02  
**ä½œè€…**: Kiro AI Assistant
