# Chronos MVP UAT测试指南

**测试日期**: 2025-10-22  
**测试版本**: MVP v1.0  
**测试类型**: 用户验收测试（UAT）  
**预计时间**: 2-3小时

## 📋 测试前准备

### 1. 环境检查

确保你的系统满足以下要求：

```bash
# 检查Git版本
git --version  # 应该 >= 2.0

# 检查Python版本
python3 --version  # 应该 >= 3.10

# 检查Node.js版本
node --version  # 应该 >= 18.0
npm --version   # 应该 >= 9.0
```

### 2. 启动应用

```bash
# 在项目根目录执行
./start-dev.sh
```

启动后应该看到：
- ✅ Backend服务运行在 `http://127.0.0.1:8765`
- ✅ Frontend服务运行在 `http://localhost:5173`

### 3. 准备测试数据

创建一个测试文件夹：

```bash
# 在你的用户目录创建测试文件夹
mkdir -p ~/chronos-test-project
cd ~/chronos-test-project

# 创建一些测试文件
echo "这是第一个文件" > file1.txt
echo "这是第二个文件" > file2.txt
mkdir docs
echo "文档内容" > docs/readme.md
```

## 🧪 测试场景

### 场景1: 初始化时光库（仓库初始化）

**目标**: 验证用户能够将普通文件夹转换为版本控制的"时光库"

**步骤**:
1. 打开浏览器访问 `http://localhost:5173`
2. 在"仓库路径"输入框中输入: `/Users/你的用户名/chronos-test-project`
3. 点击"初始化时光库"按钮

**预期结果**:
- ✅ 显示成功消息："时光库初始化成功"
- ✅ 界面显示当前仓库路径
- ✅ 文件状态区域显示3个文件（file1.txt, file2.txt, docs/readme.md）
- ✅ 所有文件标记为"新增"状态（绿色标签）

**验证**:
```bash
# 在测试文件夹中检查
cd ~/chronos-test-project
ls -la  # 应该看到 .git 文件夹
```

**记录问题**: 
- [ ] 初始化成功
- [ ] 界面显示正确
- [ ] 文件状态正确
- 问题描述: _______________

---

### 场景2: 创建快照（提交变更）

**目标**: 验证用户能够保存文件的当前状态

**步骤**:
1. 确保场景1已完成
2. 点击"创建快照"按钮
3. 在弹出的对话框中：
   - 确认所有文件都被选中（默认全选）
   - 在"快照描述"输入框输入: "初始版本 - 添加基础文件"
   - （可选）在"详细说明"输入: "包含两个文本文件和一个文档"
4. 点击"确认"按钮

**预期结果**:
- ✅ 显示成功消息："快照创建成功"
- ✅ 对话框自动关闭
- ✅ 文件状态区域变为空（无待提交的变更）
- ✅ 历史记录区域显示1条记录

**记录问题**:
- [ ] 快照创建成功
- [ ] 界面反馈正确
- [ ] 历史记录显示
- 问题描述: _______________

---

### 场景3: 修改文件并创建新快照

**目标**: 验证版本控制能够追踪文件变更

**步骤**:
1. 修改测试文件：
   ```bash
   cd ~/chronos-test-project
   echo "添加新内容" >> file1.txt
   echo "这是第三个文件" > file3.txt
   ```
2. 在浏览器中点击"刷新状态"按钮
3. 观察文件状态变化
4. 点击"创建快照"
5. 在对话框中：
   - 确认file1.txt显示为"修改"（黄色标签）
   - 确认file3.txt显示为"新增"（绿色标签）
   - 输入描述: "更新file1并添加file3"
6. 点击"确认"

**预期结果**:
- ✅ 正确识别修改的文件（file1.txt）
- ✅ 正确识别新增的文件（file3.txt）
- ✅ 快照创建成功
- ✅ 历史记录显示2条记录

**记录问题**:
- [ ] 文件变更检测正确
- [ ] 状态标签显示正确
- [ ] 快照创建成功
- 问题描述: _______________

---

### 场景4: 查看历史记录

**目标**: 验证用户能够查看所有历史快照

**步骤**:
1. 在历史记录区域查看所有快照
2. 点击第一条记录（最新的）
3. 查看详细信息

**预期结果**:
- ✅ 显示2条历史记录（按时间倒序）
- ✅ 每条记录显示：
  - 快照描述
  - 提交时间
  - 提交者信息
  - "最新"标签（仅第一条）
- ✅ 点击后展开显示详细说明
- ✅ 每条记录有"恢复到此版本"按钮

**记录问题**:
- [ ] 历史记录显示完整
- [ ] 时间显示正确
- [ ] 详情展开正常
- 问题描述: _______________

---

### 场景5: 版本回滚

**目标**: 验证用户能够恢复到之前的版本

**步骤**:
1. 在历史记录中找到第二条记录（"初始版本"）
2. 点击"恢复到此版本"按钮
3. 在确认对话框中点击"确认"
4. 等待操作完成

**预期结果**:
- ✅ 显示警告对话框："确定要恢复到此版本吗？未保存的变更将会丢失"
- ✅ 确认后显示成功消息："已恢复到指定版本"
- ✅ 文件状态区域显示file3.txt为"删除"状态
- ✅ file1.txt恢复到原始内容

**验证**:
```bash
cd ~/chronos-test-project
cat file1.txt  # 应该只有"这是第一个文件"
ls file3.txt   # 应该不存在
```

**记录问题**:
- [ ] 回滚操作成功
- [ ] 文件内容正确恢复
- [ ] 界面状态更新
- 问题描述: _______________

---

### 场景6: 创建分支（实验性功能）

**目标**: 验证用户能够创建新分支进行实验

**步骤**:
1. 先创建一个新快照恢复到最新状态
2. 在分支管理区域点击"创建新分支"按钮
3. 在对话框中输入分支名: "feature-test"
4. 点击"确认"

**预期结果**:
- ✅ 显示成功消息："分支创建成功"
- ✅ 分支下拉列表中出现"feature-test"
- ✅ 当前分支自动切换到"feature-test"
- ✅ 分支名称旁显示"当前"标识

**记录问题**:
- [ ] 分支创建成功
- [ ] 分支切换正确
- [ ] 界面显示准确
- 问题描述: _______________

---

### 场景7: 在分支中进行修改

**目标**: 验证分支隔离功能

**步骤**:
1. 确保当前在"feature-test"分支
2. 修改文件：
   ```bash
   cd ~/chronos-test-project
   echo "实验性功能" > experiment.txt
   ```
3. 刷新状态并创建快照："添加实验性功能"
4. 切换回"main"分支
5. 观察文件变化

**预期结果**:
- ✅ 在feature-test分支能看到experiment.txt
- ✅ 切换到main分支后，experiment.txt消失
- ✅ 分支切换流畅，无错误
- ✅ 历史记录根据分支显示不同内容

**验证**:
```bash
cd ~/chronos-test-project
git branch  # 查看当前分支
ls          # 查看文件列表
```

**记录问题**:
- [ ] 分支隔离正确
- [ ] 文件状态正确
- [ ] 切换操作流畅
- 问题描述: _______________

---

### 场景8: 合并分支

**目标**: 验证用户能够将实验性功能合并到主版本

**步骤**:
1. 确保当前在"main"分支
2. 点击"合并分支"按钮
3. 在对话框中选择"feature-test"分支
4. 点击"确认合并"

**预期结果**:
- ✅ 显示合并预览对话框
- ✅ 显示将要合并的变更
- ✅ 确认后显示成功消息："分支合并成功"
- ✅ experiment.txt出现在main分支
- ✅ 历史记录包含合并提交

**记录问题**:
- [ ] 合并操作成功
- [ ] 文件正确合并
- [ ] 无冲突或冲突正确处理
- 问题描述: _______________

---

### 场景9: 错误处理测试

**目标**: 验证应用的错误处理能力

#### 9.1 空描述测试
**步骤**:
1. 修改任意文件
2. 点击"创建快照"
3. 不输入描述，直接点击"确认"

**预期结果**:
- ✅ 显示错误提示："请输入快照描述"
- ✅ 对话框不关闭
- ✅ 快照未创建

#### 9.2 无变更测试
**步骤**:
1. 在没有任何文件变更的情况下
2. 点击"创建快照"

**预期结果**:
- ✅ 按钮禁用或显示提示："没有可提交的变更"

#### 9.3 无效路径测试
**步骤**:
1. 输入不存在的路径: `/invalid/path/test`
2. 点击"初始化时光库"

**预期结果**:
- ✅ 显示错误消息："路径不存在或无法访问"
- ✅ 不创建仓库

#### 9.4 重复初始化测试
**步骤**:
1. 在已初始化的文件夹再次点击"初始化时光库"

**预期结果**:
- ✅ 显示提示："该文件夹已经是时光库"
- ✅ 不重复初始化

**记录问题**:
- [ ] 错误提示清晰
- [ ] 应用不崩溃
- [ ] 用户体验良好
- 问题描述: _______________

---

### 场景10: 性能测试

**目标**: 验证应用在处理较多文件时的性能

**步骤**:
1. 创建测试文件：
   ```bash
   cd ~/chronos-test-project
   mkdir large-test
   cd large-test
   for i in {1..100}; do echo "File $i" > "file$i.txt"; done
   ```
2. 返回应用，刷新状态
3. 观察加载时间
4. 创建快照

**预期结果**:
- ✅ 状态刷新时间 < 2秒
- ✅ 文件列表正确显示100个文件
- ✅ 快照创建时间 < 3秒
- ✅ 界面响应流畅，无卡顿

**记录问题**:
- [ ] 性能表现良好
- [ ] 界面响应及时
- [ ] 无明显延迟
- 问题描述: _______________

---

## 📊 测试结果记录表

### 功能测试结果

| 场景 | 功能 | 通过 | 失败 | 备注 |
|------|------|------|------|------|
| 1 | 初始化时光库 | ☐ | ☐ | |
| 2 | 创建快照 | ☐ | ☐ | |
| 3 | 修改文件并创建快照 | ☐ | ☐ | |
| 4 | 查看历史记录 | ☐ | ☐ | |
| 5 | 版本回滚 | ☐ | ☐ | |
| 6 | 创建分支 | ☐ | ☐ | |
| 7 | 分支修改 | ☐ | ☐ | |
| 8 | 合并分支 | ☐ | ☐ | |
| 9 | 错误处理 | ☐ | ☐ | |
| 10 | 性能测试 | ☐ | ☐ | |

### 用户体验评分

| 评估项 | 评分(1-5) | 说明 |
|--------|-----------|------|
| 界面美观度 | ☐ | 1=很差, 5=很好 |
| 操作流畅度 | ☐ | |
| 功能易用性 | ☐ | |
| 错误提示清晰度 | ☐ | |
| 整体满意度 | ☐ | |

### 发现的问题

#### 严重问题（阻碍使用）
1. _______________
2. _______________

#### 一般问题（影响体验）
1. _______________
2. _______________

#### 建议改进
1. _______________
2. _______________

---

## 🔧 常见问题排查

### 问题1: Backend无法启动

**症状**: 执行start-dev.sh后Backend报错

**排查步骤**:
```bash
# 检查Python虚拟环境
cd backend
source venv/bin/activate
python --version

# 检查依赖
pip list | grep fastapi

# 手动启动Backend
python -m uvicorn main:app --reload --port 8765
```

### 问题2: Frontend无法访问Backend

**症状**: 浏览器显示"无法连接到服务器"

**排查步骤**:
```bash
# 检查Backend是否运行
curl http://127.0.0.1:8765/health

# 检查端口占用
lsof -i :8765

# 查看Backend日志
# 在Backend终端查看错误信息
```

### 问题3: Git操作失败

**症状**: 创建快照或其他Git操作报错

**排查步骤**:
```bash
# 检查Git配置
git config --global user.name
git config --global user.email

# 如果未配置，设置Git用户信息
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"
```

### 问题4: 文件状态不更新

**症状**: 修改文件后状态不显示

**排查步骤**:
1. 点击"刷新状态"按钮
2. 检查文件路径是否正确
3. 检查文件是否在.gitignore中
4. 查看浏览器控制台错误信息（F12）

---

## 📝 测试完成后

### 1. 保存测试结果

将本文档中的测试结果记录保存，包括：
- 所有场景的通过/失败状态
- 发现的问题列表
- 用户体验评分
- 改进建议

### 2. 清理测试环境

```bash
# 可选：删除测试文件夹
rm -rf ~/chronos-test-project

# 停止开发服务器
# 在两个终端中按 Ctrl+C
```

### 3. 提交反馈

将测试结果整理成报告，包括：
- 测试通过率
- 关键问题
- 优先级排序
- 下一步建议

---

## ✅ 测试检查清单

测试前：
- [ ] 环境准备完成
- [ ] 应用成功启动
- [ ] 测试数据准备就绪

测试中：
- [ ] 按顺序执行所有场景
- [ ] 记录每个场景的结果
- [ ] 截图保存关键界面
- [ ] 记录所有发现的问题

测试后：
- [ ] 完成测试结果记录表
- [ ] 整理问题列表
- [ ] 评估用户体验
- [ ] 提出改进建议

---

## 📞 需要帮助？

如果测试过程中遇到问题：
1. 查看"常见问题排查"章节
2. 检查浏览器控制台（F12）的错误信息
3. 查看Backend终端的日志输出
4. 参考 `docs/Task9/E2E_TEST_PLAN.md` 获取更多技术细节

祝测试顺利！🎉
