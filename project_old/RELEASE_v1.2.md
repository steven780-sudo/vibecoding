# Chronos v1.2.0 发布说明 - 桌面应用完整版

**发布日期**: 2025-10-22  
**版本**: v1.2.0  
**安装包**: Chronos_v1.2.0_macOS.dmg (17MB)  
**平台**: macOS (Apple Silicon)

## 🎉 重大更新

本次更新专注于用户体验优化，将技术术语转换为通俗易懂的语言，并新增多项实用功能。

**重要修复**：修复了桌面应用中API错误处理的关键bug，确保应用稳定运行。

---

## ✨ 核心功能

### 1. 文件夹选择对话框
- ✅ 支持可视化文件夹选择，无需手动输入路径
- ✅ 类似Finder的友好交互体验

### 2. 文件树状展示
- ✅ 完整显示多层文件夹结构
- ✅ 支持展开/折叠文件夹
- ✅ 清晰展示所有文件变更
- ✅ 默认折叠状态，避免界面拥挤

### 3. 用户友好文案
将所有技术术语改为通俗易懂的语言：
- 仓库 → 时光机文件夹
- 待提交的变更 → 有变动但未保存的文件
- 快照 → 备份
- 分支 → 副本（main代表主本，其余均为副本）
- 回滚 → 恢复

### 4. 使用说明和更新记录
- ✅ 新增【使用说明】按钮，右侧抽屉展示
- ✅ 新增【软件更新说明】按钮，查看历史版本更新
- ✅ 简化使用说明，突出核心功能

### 5. 返回首页功能
- ✅ 支持返回首页切换或新增时光机文件夹
- ✅ 确认对话框防止误操作

### 6. 历史记录智能校验
- ✅ 自动检测历史记录中的文件夹是否存在
- ✅ 无效路径自动删除并提示用户
- ✅ 避免打开不存在的文件夹导致错误

---

## 🔧 界面优化

### 布局改进
- ✅ 优化左右布局比例（左侧10列，右侧14列）
- ✅ 压缩组件间距，避免滚动条
- ✅ 文件夹路径显示在"文件夹状态"右侧

### 细节优化
- ✅ Git ID前添加身份证图标和"ID:"标识
- ✅ 删除重复的文案和按钮
- ✅ 统一字体大小和样式
- ✅ 首页文案优化

---

## 🐛 Bug修复

### 关键修复：API错误处理逻辑
- ✅ **修复桌面应用无法打开文件夹的严重bug**
- ✅ 问题原因：`client.ts` 中 `return` 语句位置错误，导致错误处理代码被跳过
- ✅ 影响：所有API调用失败时显示错误的错误消息（"资源不存在"）
- ✅ 修复：调整代码逻辑顺序，确保错误信息正确传递

### Git命令优化
- ✅ 使用`git status --porcelain -uall`参数
- ✅ 正确获取所有未追踪文件的完整路径
- ✅ 解决只显示文件夹不显示文件的问题

### 构建流程优化
- ✅ 修复 `tauri.conf.json` 中不存在的构建脚本引用
- ✅ 优化后端二进制文件打包流程
- ✅ 确保桌面应用使用最新的后端代码

---

## 📊 技术改进

### 新增组件
- `FileTreeView` - 文件树容器组件
- `TreeNodeComponent` - 树节点组件
- `ReleaseNotes` - 软件更新说明组件

### 工具函数
- `buildTree()` - 构建树状结构
- `getSelectedFiles()` - 获取选中文件
- `updateNodeSelection()` - 更新选择状态

---

## 🎯 用户体验提升

1. **更直观的界面**：所有文案都使用非技术用户能理解的语言
2. **更清晰的文件展示**：树状结构完整展示文件层级
3. **更便捷的操作**：可视化文件夹选择、一键返回首页
4. **更友好的提示**：智能校验、错误提示、使用说明

---

## 📦 安装说明

1. 下载 `Chronos_v1.2.0_macOS.dmg`
2. 双击打开dmg文件
3. 将Chronos拖入Applications文件夹
4. 首次打开时，右键点击应用选择"打开"（绕过macOS安全检查）
5. 开始使用！

**系统要求**：
- macOS 10.13 或更高版本
- Apple Silicon (M1/M2/M3) 或 Intel芯片
- 需要安装Git（`brew install git`）

---

## 📝 下一步计划

### v1.3 - 内置Git（最高优先级）
- 内置Git二进制文件，无需用户安装
- 开箱即用的完整体验

### v1.4-v1.5
- Windows和Linux平台支持
- 快照搜索功能
- 性能监控面板
- 主题切换功能

---

## 🙏 致谢

感谢所有测试用户的反馈，帮助我们发现并修复了关键bug！

---

**感谢使用 Chronos！**

如有问题或建议，请联系：sunshunda@gmail.com

**GitHub**: https://github.com/steven780-sudo/vibecoding
